@props(['post'])
<div x-data="{
        hasClapped: @json($post->user->isClappedBy(auth()->user())),
        count: {{ $post->claps()->count() }},
        clap(){
            axios.post('/clap/{{ $post->id }}')
            .then(response => {
                this.hasClapped = !this.hasClapped;
                this.count = response.data.clapCount;
            }).catch(error => {
                console.error(error);
            });
        }
}">
    <button class="flex items-center gap-2 px-3 py-1 border rounded-2xl text-sm"
        @click="clap()">

        {{-- Outline --}}
        <template x-if="!hasClapped">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25px" height="25px"
            viewBox="0 0 64 64" aria-hidden="true" role="img" class="iconify iconify--emojione-monotone"
            preserveAspectRatio="xMidYMid meet">
            <path
                d="M54.255 25.75c-2.854-1.952-4.644-4.562-6.075-8.581c-.532-1.494-1.859-2.46-3.381-2.46c-1.636 0-3.132 1.055-4.104 2.894a8.582 8.582 0 0 0-.986 3.28c-1.008-1.838-3.056-2.229-4.027-.922c0 0-7.986-6.071-10.71-8.004c-3.62-2.566-8.415.276-8.295 3.211c-4.571-2.478-9.589 1.897-8.043 6.482c-1.768-.324-6.29 4.363-1.536 7.963c-3.293.338-4.572 5.494-.745 7.841c0 0 .018.713.069 1.063c-2.522.766-3.392 5.534-.953 7.039c0 0 17.59 11.232 23.645 14.611c3.29 1.836 8.955 2.557 14.002.918c4.901-.508 9.059-3.106 12.4-7.736c9.195-12.742 1.911-25.429-1.261-27.599m-1.077 26.357c-3.829 5.38-9.328 5.938-13.536 5.938c-6.869 0-11.065-3.293-11.065-3.293L9.725 40.676c-3.569-2.464-1.42-6.39 1.084-6.318l14.997 10.219l1.846.115S14.257 35.076 9.92 31.691c-2.532-1.976-1.7-5.75 1.578-6.5l18.756 13.464l1.844.115l-20.035-15.538c-4.233-3.094.015-8.928 4.119-5.957c4.733 3.426 18.972 14.285 18.972 14.285l1.846.116l-18.745-15.527c-.162-2.396 3.025-4.479 5.573-2.573c5.124 3.833 20.504 15.32 20.504 15.32c-.396-1.109-.594-1.943-.594-1.943s-2.922-4.858-1.339-8.395c1.39-3.102 4.202-2.598 4.769-.931c1.507 4.438 3.068 7.072 6.191 9.292c3.988 2.835 8.066 13.605-.181 25.188"
                />
            <path d="M46.041 2.889L37.431 2l2.938 12.26z"  />
            <path d="M53.165 5.264L48.79 15.457l10.205-2.734z"  />
            <path d="M29.111 3.549l-6.21 5.133l8.944 5.828z"  />
        </svg>
        </template>

        {{-- Filled --}}
        <template x-if="hasClapped">
        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 800 800" fill="none">
            <path
                d="M519.5 270.5C517.1 292.1 527.167 315.833 540 338L293.5 154.5H241.5L207.5 207.5L183.5 195.5L122 213V296.5L91.4999 330L104.5 414L91.4999 496.5L355.5 721L519.5 747.5L670.5 681C698.333 620.167 750.7 484 737.5 426C721 353.5 657 320.5 641 304C625 287.5 596.5 227 583.5 207.5C570.5 188 555 196.5 540 207.5C525 218.5 522.5 243.5 519.5 270.5Z"
                fill="#FDC236" />
            <path
                d="M678.187 321.875C642.512 297.475 620.137 264.85 602.25 214.613C595.6 195.938 579.012 183.863 559.987 183.863C539.537 183.863 520.837 197.05 508.687 220.038C501.866 232.738 497.674 246.682 496.362 261.038C483.762 238.063 458.162 233.175 446.025 249.513C446.025 249.513 346.2 173.625 312.15 149.463C266.9 117.388 206.962 152.913 208.462 189.6C151.325 158.625 88.5999 213.313 107.925 270.625C85.8249 266.575 29.2999 325.163 88.7249 370.163C47.5624 374.388 31.575 438.838 79.4124 468.175C79.4124 468.175 79.6374 477.088 80.2749 481.463C48.7499 491.038 37.8749 550.638 68.3624 569.45C68.3624 569.45 288.237 709.85 363.925 752.088C405.05 775.038 475.862 784.05 538.95 763.563C600.212 757.213 652.187 724.738 693.95 666.863C808.887 507.588 717.837 349 678.187 321.875ZM664.725 651.338C616.862 718.588 548.125 725.563 495.525 725.563C409.662 725.563 357.212 684.4 357.212 684.4L121.562 508.45C76.95 477.65 103.812 428.576 135.112 429.476L322.575 557.213L345.65 558.65C345.65 558.65 178.212 438.45 124 396.138C92.35 371.438 102.75 324.263 143.725 314.888L378.175 483.188L401.225 484.625L150.787 290.4C97.8749 251.725 150.975 178.8 202.275 215.938C261.437 258.763 439.425 394.5 439.425 394.5L462.5 395.95L228.187 201.863C226.162 171.913 266 145.875 297.85 169.7C361.9 217.613 554.15 361.2 554.15 361.2C549.2 347.338 546.725 336.913 546.725 336.913C546.725 336.913 510.2 276.188 529.987 231.975C547.362 193.2 582.512 199.5 589.6 220.338C608.437 275.813 627.95 308.738 666.987 336.488C716.837 371.925 767.812 506.55 664.725 651.338Z"
                fill="black" />
            <path
                d="M678.187 321.875C642.512 297.475 620.137 264.85 602.25 214.613C595.6 195.938 579.012 183.863 559.987 183.863C539.537 183.863 520.837 197.05 508.687 220.038C501.866 232.738 497.674 246.682 496.362 261.038C483.762 238.063 458.162 233.175 446.025 249.513C446.025 249.513 346.2 173.625 312.15 149.463C266.9 117.388 206.962 152.913 208.462 189.6C151.325 158.625 88.5999 213.313 107.925 270.625C85.8249 266.575 29.2999 325.163 88.7249 370.163C47.5624 374.388 31.575 438.838 79.4124 468.175C79.4124 468.175 79.6374 477.088 80.2749 481.463C48.7499 491.038 37.8749 550.638 68.3624 569.45C68.3624 569.45 288.237 709.85 363.925 752.088C405.05 775.038 475.862 784.05 538.95 763.563C600.212 757.213 652.187 724.738 693.95 666.863C808.887 507.588 717.837 349 678.187 321.875ZM664.725 651.338C616.862 718.588 548.125 725.563 495.525 725.563C409.662 725.563 357.212 684.4 357.212 684.4L121.562 508.45C76.95 477.65 103.812 428.576 135.112 429.476L322.575 557.213L345.65 558.65C345.65 558.65 178.212 438.45 124 396.138C92.35 371.438 102.75 324.263 143.725 314.888L378.175 483.188L401.225 484.625L150.787 290.4C97.8749 251.725 150.975 178.8 202.275 215.938C261.437 258.763 439.425 394.5 439.425 394.5L462.5 395.95L228.187 201.863C226.162 171.913 266 145.875 297.85 169.7C361.9 217.613 554.15 361.2 554.15 361.2C549.2 347.338 546.725 336.913 546.725 336.913C546.725 336.913 510.2 276.188 529.987 231.975C547.362 193.2 582.512 199.5 589.6 220.338C608.437 275.813 627.95 308.738 666.987 336.488C716.837 371.925 767.812 506.55 664.725 651.338Z"
                fill="black" fill-opacity="0.2" />
            <path d="M575.512 36.1125L467.887 25L504.612 178.25L575.512 36.1125Z" fill="black" />
            <path d="M664.562 65.7998L609.875 193.212L737.437 159.037L664.562 65.7998Z" fill="black" />
            <path d="M363.887 44.3623L286.262 108.525L398.062 181.375L363.887 44.3623Z" fill="black" />
        </svg>
        </template>
        <span x-text="count"></span>
    </button>
</div>